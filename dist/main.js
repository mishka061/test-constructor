(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var i=n.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!e;)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,document.addEventListener("DOMContentLoaded",(function(){let t=document.querySelector(".createArrTests"),e=document.querySelector(".addQuestionsFormBtn"),n=document.querySelector(".formContentHeader"),i=document.querySelector(".submit"),o=document.querySelector(".messageCreateResult"),s=document.querySelector(".messageResultTest"),l=document.querySelector(".paginationCreate"),a=document.querySelector(".messageBtnContent"),d=0;e.addEventListener("click",(function(e){e.preventDefault(),n.style.display="none",i.style.display="block",o.style.display="block",a.style.display="block";let s=document.createElement("div");s.classList.add("questonsForm"),d++,s.innerHTML=`\n      <h5 name="questions[${d}][title]">Вопрос № ${d}</h5>\n      <div class="questionsContent">\n          <div class="tooltipQuestions">\n              <div class="tooltip-toggle-questions">\n                  <p>Вопрос теста</p>\n                  <img src="/chto-luchshe.jpg" alt="" class="tooltip-icon">\n                  <div class="tooltip-text-questions">Сформулируйте интересный завлекающий вопрос теста</div>\n              </div>\n              <div class="questionsCount">\n                  <input type="text" name="questions[${d}][question]" class="questionsInput"></input>\n                  <input type="hidden" name="questionsTitle" class="questionsTitle" value="Вопрос номер ${d}">\n              </div>\n          </div>\n      </div>\n      <div class="tooltip-toggle-questions">\n        <p>варианты ответов</p>\n        <img src="/chto-luchshe.jpg" alt="" class="tooltip-icon">\n        <div class="tooltip-text-questions">Добавьте два или больше вариантов ответа и укажите галочкой верный.</div>\n      </div>\n      <div class="addOptionsContentBtn">\n      \n        <button class="addTwoOptionsBtn">Добавить два варианта</button>\n        <div class="twoOptionsContent"></div>\n        <button class="addManyOptionsBtn">Добавить много вариантов</button>\n        <div class="manyOptionsContent"></div>\n      </div>\n      <input type="file" name="image[]"  id="imgCreateTest" multiple />\n    `,t.appendChild(s),function(){let e=document.createElement("button");e.classList.add("paginationCreateBlock"),e.textContent=t.children.length,l.appendChild(e)}(),function(){for(let e=0;e<t.children.length;e++)t.children[e].style.display="none";t.children[t.children.length-1].style.display="block"}(),l.addEventListener("click",(function(e){e.target.classList.contains("paginationCreateBlock")&&(document.querySelectorAll(".paginationCreateBlock").forEach((t=>t.classList.remove("styleBtn"))),e.target.classList.add("styleBtn"),function(e){for(let n=0;n<t.children.length;n++)t.children[n].style.display=n===e-1?"block":"none"}(parseInt(e.target.textContent,10)))}));let c=s.querySelector(".addTwoOptionsBtn"),r=s.querySelector(".addManyOptionsBtn");c.addEventListener("click",(function(t){t.preventDefault(),c.nextElementSibling.innerHTML=`\n        <div class="twoOptionsContainer">\n          <div class="twoOptions">\n              <input type="text" class="twoOptions1" name="questions[${d}][twoOptions][0]">\n              <input type="radio" name="questions[${d}][radio]" class="radioOption" value="0">\n          </div>\n          <div class="twoOptions">\n              <input type="text" class="twoOptions2" name="questions[${d}][twoOptions][1]">\n              <input type="radio" name="questions[${d}][radio]" class="radioOption" value="1">\n          </div>\n          <button id="deleteTwoOptionsBtn">Удалить ответы</button>\n        </div>`,c.style.display="none",r.style.display="none";let e=s.querySelector("#deleteTwoOptionsBtn");e.addEventListener("click",(function(t){t.preventDefault(),e.parentElement.remove(),c.style.display="block",r.style.display="block"}))})),r.addEventListener("click",(function(t){t.preventDefault();let e=r.nextElementSibling;e.innerHTML+='\n        <div class="answerForm">\n          <button class="addAnswerButton">добавить ответ</button>\n        </div>',c.style.display="none",r.style.display="none";let n=s.querySelector(".addAnswerButton");n.addEventListener("click",(function(t){t.preventDefault();let i=n.parentElement,o=document.createElement("div");o.classList.add("answerListItem"),o.innerHTML=`\n          <input type="text" class="manyOptions" name="questions[${d}][manyOptions][]">\n          <input type="checkbox" class="checkbox" name="questions[${d}][manyOptions][${d}][checkbox]">\n          <input type="hidden" name="questions[${d}][checkbox]" value="">\n          <img src="/1648003803_45-kartinkin-net-p-krestik-kartinki-48.png" alt="" class="deleteManyOptionsButton">`,i.appendChild(o),o.querySelectorAll(".checkbox").forEach((function(t){t.addEventListener("click",(function(){t.setAttribute("name","flag"),t.nextElementSibling.value=t.value}))})),o.querySelectorAll(".deleteManyOptionsButton").forEach((function(t){t.addEventListener("click",(function(){o.remove()}))})),e.querySelectorAll(".deleteManyOptionsButton").forEach((function(t){t.addEventListener("click",(function(){if(t.parentElement.remove(),0===i.children.length){let t=e.querySelector(".answerForm");c.style.display="block",r.style.display="block",t.remove()}}))}))}))}))})),o.addEventListener("click",(function(t){t.preventDefault(),"block"===s.style.display||""===s.style.display?(s.style.display="none",o.textContent="Добавить сообщения"):(s.style.display="block",o.textContent="Скрыть сообщения ")}))})),document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(t){let e=t.target;if(e.classList.contains("delleteEditOptionsBtn")){t.preventDefault();let n=e.closest(".editQuestonsForm"),i=n.querySelector(".addManyOptionsEditBtn"),o=n.querySelector(".addTwoOptionsEditBtn");e.parentElement.remove(),i.style.display="block",o.style.display="block"}if(e.classList.contains("addTwoOptionsEditBtn")){t.preventDefault();let n=e.closest(".editQuestonsForm"),i=n.querySelector(".addManyOptionsEditBtn"),o=n.querySelector(".addTwoOptionsEditBtn"),s=n.querySelector(".twoOptionsContentEdit"),l=Array.from(n.parentElement.children).indexOf(n);s.innerHTML+=`\n              <div class="twoOptionsContainer">\n                  <div class="twoOptions">\n                      <input type="text" class="twoOptionsEdit1" name="questions[${l}][twoOptions][0]">\n                      <input type="radio" name="questions[${l}][radio]" class="radioOption" value="0">\n                  </div>\n                  <div class="twoOptions">\n                      <input type="text" class="twoOptionsEdit1" name="questions[${l}][twoOptions][1]">\n                      <input type="radio" name="questions[${l}][radio]" class="radioOption" value="1">\n                  </div>\n                  <button class="delleteEditOptionsBtn">Удалить вариант ответа</button>\n                  <input type="file" name="image[]" id="imgCreateTest" multiple />\n              </div>`,o.style.display="none",i.style.display="none"}if(e.classList.contains("addManyOptionsEditBtn")){t.preventDefault();let n=e.closest(".editQuestonsForm"),i=n.querySelector(".addManyOptionsEditBtn"),o=n.querySelector(".addTwoOptionsEditBtn"),s=n.querySelector(".manyOptionsContentEdit"),l=Array.from(n.parentElement.children).indexOf(n);s.innerHTML+='\n              <div class="answerEditForm">\n              <button class="addEditAnswerBtn">добавить ответ</button>\n              </div>\n              <input type="file" name="image[]" id="imgCreateTest" multiple />',o.style.display="none",i.style.display="none";let a=n.querySelector(".addEditAnswerBtn"),d=n.querySelector(".answerEditForm");a.addEventListener("click",(function(t){console.log("addEditAnswerBtn.addEventListener"),t.preventDefault();let e=document.createElement("div");e.classList.add("answerListItem"),e.innerHTML+=`\n            <input type="text" class="manyOptionsEdit" name="questions[${l}][manyOptions][]">\n            <input type="checkbox" class="checkbox" name="questions[${l}][manyOptions][${l}][checkbox]">\n            <input type="hidden" name="questions[${l}][checkbox]" value="">\n            <img src="/1648003803_45-kartinkin-net-p-krestik-kartinki-48.png" alt="" class="delManyEditOptButton">\n            \n          `,d.appendChild(e);let s=document.querySelectorAll(".delManyEditOptButton");for(let t=0;t<s.length;t++)s[t].addEventListener("click",(function(){s[t].parentElement.remove();let e=n.querySelector(".answerEditForm");0===d.children.length&&(o.style.display="block",i.style.display="block",e.style.display="none")}))}))}if(e.classList.contains("addEditListQuestionsForm")){t.preventDefault();let n=e.previousElementSibling,i=document.createElement("div");i.classList.add("editQuestonsForm");let o=n.querySelectorAll(".editQuestonsForm").length;i.innerHTML=`                   \n              <h5 name="questions[${o}][title[${o}]]">Вопрос номер ${o+1}</h5>\n              <div class="questionsContent">\n                  <h5>Напишите вопрос</h5>\n                  <input type="text" name="questions[${o}][question]" class="questionsInput"></input>\n                  <input type="hidden" name="questions[${o}][title]" class="questionsTitle" value="Вопрос номер ${o+1}">\n              </div>\n              <div class="addOptionsEditContentBtn">\n      \n              <button class="addTwoOptionsEditBtn">Добавить два варианта </button>\n              <div class="twoOptionsContentEdit" data-type="twoOptions"></div>\n              <button class="addManyOptionsEditBtn">Добавить много вариантов</button>\n              <div class="manyOptionsContentEdit" data-type="manyOptions"></div>\n            </div>\n\n             \n          `,n.appendChild(i),document.querySelectorAll(".editQuestonsForm").forEach(((t,e)=>{t.querySelector("h5").innerHTML=`Вопрос номер ${e+1}`}))}}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".exitToken").addEventListener("click",(function(t){t.preventDefault(),console.log("exitToken click"),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/"}))})),document.addEventListener("DOMContentLoaded",(function(){let t=window.location.pathname,e=document.querySelector(".headerBtnCreate"),n=document.querySelector(".headerBtnProfile");"/test"===t&&(n.classList.remove("active"),e.classList.add("active")),-1!==t.indexOf("/profile")&&(e.classList.remove("active"),n.classList.add("active"))}));let e=document.querySelector(".pagination"),n=document.querySelectorAll(".allTestArr"),i=10,o=1;function s(t){let n=document.createElement("button");n.classList.add("page-link"),n.textContent=t,n.addEventListener("click",(function(){o=t,l()})),e.appendChild(n)}function l(){for(let t=0;t<n.length;t++)n[t].style.display=t<(o-1)*i||t>=o*i?"none":"block"}for(let t=0;t<n.length;t++)t%i==0&&s(t/i+1);l();let a=document.querySelector(".paginationTest"),d=document.querySelectorAll(".testConteiner"),c=document.querySelector(".seeResult"),r=document.querySelector(".TakeTestAgain"),p=1,u=1,y=[];function m(t){let e=document.createElement("button");e.classList.add("paginationCreateBlock"),e.style.display="none",e.textContent=t,e.addEventListener("click",(function(){u=t,v()})),a.appendChild(e)}function v(){for(let t=0;t<d.length;t++)d[t].style.display=t<(u-1)*p||t>=u*p?"none":"block";u===Math.ceil(d.length/p)?c.style.display="block":c.style.display="none"}for(let t=0;t<Math.ceil(d.length/p);t++)m(t+1);d.forEach(((t,e)=>{t.addEventListener("click",(function(t){let n=t.target.closest(".takeQuestionsTestBtn");if(n){t.stopImmediatePropagation();let i=n.value;y[e]=i,u=Math.floor(e/p)+1,u++,v(),c.style.display="none",u===d.length+1&&(c.style.display="block",arrResponseSubmit.setAttribute("name","arrResponse"),arrResponseSubmit.setAttribute("value",y.join(",")))}}))})),v(),r.addEventListener("click",(function(t){t.preventDefault();let e=r.getAttribute("data-id");window.location.href="/takeTest/"+e}));let f=document.getElementById("passwordInput"),h=document.getElementById("confirmPasswordInput"),E=document.getElementById("confirmPasswordError"),g=document.getElementById("emailInput"),k=document.getElementById("loginInput");h.addEventListener("input",(function(){let t=f.value,e=h.value;E.style.display=t===e||""===e?"none":"block"})),g.addEventListener("input",(async function(){let t=g.value;try{await fetch(`/check-email?email=${t}`)}catch(t){console.error(t)}})),k.addEventListener("input",(async function(){let t=k.value;try{await fetch(`/check-login?login=${t}`)}catch(t){console.error(t)}}));let q=document.getElementById("passwordCheckbox1");q.addEventListener("change",(function(){O("passwordInput",q)}));let b=document.getElementById("passwordCheckbox2");function O(t,e){document.getElementById(t).type=e.checked?"text":"password"}b.addEventListener("change",(function(){O("confirmPasswordInput",b)}))})();